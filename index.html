<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login - Masternett IPTV</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-auth.js"></script>
  <style>
    /* Estilo personalizado para os campos de entrada */
    input {
      background-color: black;
      color: green;
      border: 2px solid green;
    }
    input:focus {
      border-color: lightgreen;
      outline: none;
    }

    /* Estilo para as abas do menu */
    .hidden {
      display: none;
    }

    .tab {
      display: none;
    }

    .active-tab {
      display: block;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-900 dark:bg-gray-900 dark:text-white">
  <header class="p-4 bg-white dark:bg-gray-800 shadow-md">
    <div class="max-w-7xl mx-auto flex justify-between items-center">
      <h1 class="text-xl font-bold">📺 Masternett IPTV</h1>
      <nav class="space-x-4">
        <button onclick="showTab('inicio')" class="nav-button">🏠 Início</button>
        <button onclick="showTab('login')" class="nav-button">🔐 Login</button>
        <button onclick="showTab('loja')" id="lojaBtn" class="nav-button hidden">🛒 Loja</button>
        <button onclick="showTab('carrinho')" id="carrinhoBtn" class="nav-button hidden">🛍️ Carrinho</button>
        <button onclick="showTab('perfil')" id="perfilBtn" class="nav-button hidden">👤 Perfil</button>
      </nav>
    </div>
  </header>

  <main class="max-w-7xl mx-auto p-4 space-y-10">
    <section id="inicio" class="tab active-tab">
      <h2 class="text-2xl font-bold mb-4">Bem-vindo à Masternett IPTV!</h2>
      <p>A melhor experiência em IPTV. Faça login ou crie uma conta.</p>
    </section>

    <section id="login" class="tab">
      <h2 class="text-xl font-semibold mb-4">🔐 Login / Criar Conta</h2>
      <div>
        <input type="email" id="email" placeholder="Digite seu email" class="border px-4 py-2 rounded w-full md:w-1/2" required>
      </div>
      <div class="mt-2">
        <input type="password" id="senha" placeholder="Digite sua senha" class="border px-4 py-2 rounded w-full md:w-1/2" required>
      </div>
      <div class="mt-2">
        <button onclick="login()" class="px-4 py-2 bg-blue-600 text-white rounded">Entrar</button>
      </div>
      <div class="mt-2">
        <button onclick="cadastro()" class="px-4 py-2 bg-green-600 text-white rounded">Criar Conta</button>
      </div>
      <p id="erroMensagem" class="text-red-500 mt-2 hidden"></p>
    </section>

    <section id="perfil" class="tab">
      <h2 class="text-xl font-semibold mb-2">👤 Seu Perfil</h2>
      <p id="userName">Você não está logado!</p>
      <button onclick="logout()" class="px-4 py-2 bg-red-600 text-white rounded">Sair</button>
    </section>

    <section id="loja" class="tab">
      <h2 class="text-xl font-semibold mb-4">🛒 Loja</h2>
      <p>Escolha o plano de IPTV que deseja comprar.</p>
      <!-- Aqui você pode adicionar a lógica para exibir planos de IPTV e adicionar ao carrinho -->
    </section>

    <section id="carrinho" class="tab">
      <h2 class="text-xl font-semibold mb-4">🛍️ Carrinho</h2>
      <p>Aqui estão os produtos que você adicionou ao carrinho.</p>
      <!-- Lógica do carrinho -->
    </section>
  </main>

  <script>
    const firebaseConfig = {
      apiKey: "SUA_API_KEY",
      authDomain: "SEU_AUTH_DOMAIN",
      projectId: "SEU_PROJECT_ID",
      storageBucket: "SEU_STORAGE_BUCKET",
      messagingSenderId: "SEU_MESSAGING_SENDER_ID",
      appId: "SEU_APP_ID"
    };
    const app = firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    function showTab(tabId) {
      document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.remove('active-tab');
      });
      document.getElementById(tabId).classList.add('active-tab');
    }

    function login() {
      const email = document.getElementById('email').value;
      const senha = document.getElementById('senha').value;
      const erroMensagem = document.getElementById('erroMensagem');

      // Verifica se é admin
      if (email === 'adminnetty' && senha === 'masteradmin') {
        document.getElementById('userName').innerText = `Bem-vindo, Adminnetty! (Administrador)`;
        localStorage.setItem('userEmail', 'adminnetty'); // Armazenar no localStorage como admin
        showTab('perfil');
        toggleMenuVisibility(true);
        return;
      }

      if (!email || !senha) {
        erroMensagem.textContent = 'Por favor, preencha todos os campos.';
        erroMensagem.classList.remove('hidden');
        return;
      }

      auth.signInWithEmailAndPassword(email, senha)
        .then(userCredential => {
          const user = userCredential.user;
          document.getElementById('userName').innerText = `Bem-vindo, ${user.email}!`;
          localStorage.setItem('userEmail', user.email); // Armazenar no localStorage
          showTab('perfil');
          toggleMenuVisibility(true);
        })
        .catch(error => {
          erroMensagem.textContent = 'Erro ao fazer login. Verifique suas credenciais.';
          erroMensagem.classList.remove('hidden');
          console.error(error.message);
        });
    }

    function cadastro() {
      const email = document.getElementById('email').value;
      const senha = document.getElementById('senha').value;
      const erroMensagem = document.getElementById('erroMensagem');

      if (!email || !senha) {
        erroMensagem.textContent = 'Por favor, preencha todos os campos.';
        erroMensagem.classList.remove('hidden');
        return;
      }

      auth.createUserWithEmailAndPassword(email, senha)
        .then(userCredential => {
          const user = userCredential.user;
          document.getElementById('userName').innerText = `Conta criada, ${user.email}!`;
          localStorage.setItem('userEmail', user.email);
          showTab('perfil');
          toggleMenuVisibility(true);
        })
        .catch(error => {
          erroMensagem.textContent = 'Erro ao criar conta. Tente novamente.';
          erroMensagem.classList.remove('hidden');
          console.error(error.message);
        });
    }

    function logout() {
      auth.signOut().then(() => {
        document.getElementById('userName').innerText = "Você não está logado!";
        localStorage.removeItem('userEmail'); // Remover do localStorage
        showTab('inicio');
        toggleMenuVisibility(false);
      });
    }

    // Função para mostrar/ocultar as opções do menu após login
    function toggleMenuVisibility(loggedIn) {
      const lojaBtn = document.getElementById('lojaBtn');
      const carrinhoBtn = document.getElementById('carrinhoBtn');
      const perfilBtn = document.getElementById('perfilBtn');
      
      if (loggedIn) {
        lojaBtn.classList.remove('hidden');
        carrinhoBtn.classList.remove('hidden');
        perfilBtn.classList.remove('hidden');
      } else {
        lojaBtn.classList.add('hidden');
        carrinhoBtn.classList.add('hidden');
        perfilBtn.classList.add('hidden');
      }
    }

    // Persistir estado de login ao recarregar
    window.onload = function() {
      const userEmail = localStorage.getItem('userEmail');
      if (userEmail) {
        document.getElementById('userName').innerText = `Bem-vindo, ${userEmail}!`;
        showTab('perfil');
        toggleMenuVisibility(true);
      }
    }
  </script>
</body>
</html>
